<!doctype html>
<html lang="en">

<head>
	<meta charset="utf-8">

	<title>TTA 아카데미 CSTS Guide</title>

	<link rel="stylesheet" href="reveal/dist/reveal.css">
	<link rel="stylesheet" href="reveal/dist/theme/white.css" id="theme">
	<link rel="stylesheet" href="reveal/css/custom/tta.css">

	<link rel="stylesheet" href="reveal/plugin/highlight/monokai.css">

	<style>
		/* Floating button (invisible by default) */
		#issue-button {
			position: fixed;
			top: 20px;
			right: 20px;
			background-color: rgb(18, 59, 241);
			color: white;
			padding: 10px 10px;
			border-radius: 5px;
			cursor: pointer;
			z-index: 1000;
			font-size: 12px;
		}
	</style>

</head>

<body>

	<div class="reveal">
		<!-- Floating button -->
		<div id="issue-button">수정요청</div>

		<div class="slides"><section data-markdown="csts/24-12-01-csts-00-contents.md" data-separator="\n---" data-separator-vertical="\n--"></section>
<section data-markdown="csts/24-12-01-csts-98-refs.md" data-separator="\n---" data-separator-vertical="\n--"></section>
<section data-markdown="csts/24-12-01-csts-99-index.md" data-separator="\n---" data-separator-vertical="\n--"></section>
</div>

		<script src="reveal/dist/reveal.js"></script>
		<script src="reveal/plugin/markdown/markdown.js"></script>
		<script src="reveal/plugin/highlight/highlight.js"></script>
		<script src="reveal/plugin/notes/notes.js"></script>
		<script src="reveal/plugin/math/math.js"></script>

		<script>

			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				//center: true,
				slideNumber: 'c/t',

				plugins: [RevealMarkdown, RevealHighlight, RevealNotes],
				pdfSeparateFragments: false,
				//pdfMaxPagesPerSlide: 1,
				//pdfPageHeightOffset: 5,
			});


			// Example function to open GitHub Issue
			function openGitHubIssue(slideNumber) {
				slide = Reveal.getCurrentSlide();

				const issueTitle = `Notes for Slide ${slideNumber}`;
				//const issueBody = `Please add the notes for slide number ${slideNumber}.`;
				const issueBody = slide;

				const url = `https://github.com/orghenry/issues/new?title=${encodeURIComponent(issueTitle)}&body=${encodeURIComponent(issueBody)}`;
				window.open(url, '_blank');
			}

			// Function to get current and total slide indices at any time
			function getCurrentSlideIndices() {
				// Get current slide indices using Reveal.js
				const indices = Reveal.getIndices();
				
				// Get all horizontal slides
				const horizontalSlides = document.querySelectorAll('.slides > section');
				
				// Get vertical slides in the current horizontal section
				const currentHorizontalSlide = horizontalSlides[indices.h];
				const verticalSlides = currentHorizontalSlide.querySelectorAll('section');
				
				return {
					// Current slide indices (1-based for readability)
					current: {
						horizontal: indices.h + 1,
						vertical: indices.v + 1
					},
					// Total slide counts
					total: {
						horizontal: horizontalSlides.length,
						vertical: verticalSlides.length
					},
					// Raw indices (0-based)
					raw: {
						horizontal: indices.h,
						vertical: indices.v
					},
					// Detailed slide notation
					notation: {
						// Formats like "2.1" for 2nd horizontal slide, 1st vertical slide
						full: `${indices.h + 1}.${indices.v + 1}`,
						// Formats for different use cases
						display: `Slide ${indices.h + 1}.${indices.v + 1}`
					}
				};
			}

			// Event listener for "Create Issue for Notes" button
			document.querySelectorAll('#issue-button').forEach((button, index) => {
				button.addEventListener('click', () => {
					slides = Reveal.getCurrentSlide();

					// Total number of slides
					total = Reveal.getTotalSlides();
					past = Reveal.getSlidePastCount();
					console.log(past+'/'+total)
					openGitHubIssue(past+1);
				});
			});			
		</script>

</body>

</html>